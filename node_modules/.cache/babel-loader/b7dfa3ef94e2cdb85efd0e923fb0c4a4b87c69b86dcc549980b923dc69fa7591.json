{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar znsUtils_1 = require(\"./utils/znsUtils\");\nvar utils_1 = require(\"./utils\");\nvar types_1 = require(\"./types\");\nvar resolutionError_1 = require(\"./errors/resolutionError\");\nvar publicTypes_1 = require(\"./types/publicTypes\");\nvar FetchProvider_1 = __importDefault(require(\"./FetchProvider\"));\nvar namehash_1 = require(\"./utils/namehash\");\nvar NamingService_1 = require(\"./NamingService\");\nvar configurationError_1 = __importStar(require(\"./errors/configurationError\"));\n/**\n * @internal\n */\nvar Zns = /** @class */function (_super) {\n  __extends(Zns, _super);\n  function Zns(source) {\n    if (source === void 0) {\n      source = {\n        url: Zns.UrlMap[1],\n        network: 'mainnet'\n      };\n    }\n    var _this = _super.call(this) || this;\n    _this.name = publicTypes_1.NamingServiceName.ZNS;\n    _this.checkNetworkConfig(source);\n    _this.network = Zns.NetworkNameMap[source.network];\n    _this.url = source['url'] || Zns.UrlMap[_this.network];\n    _this.provider = source['provider'] || new FetchProvider_1.default(_this.name, _this.url);\n    _this.registryAddr = source['registryAddress'] || Zns.RegistryMap[_this.network];\n    _this.checkRegistryAddress(_this.registryAddr);\n    if (_this.registryAddr.startsWith('0x')) {\n      _this.registryAddr = (0, znsUtils_1.toBech32Address)(_this.registryAddr);\n    }\n    return _this;\n  }\n  Zns.prototype.owner = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var recordAddresses, ownerAddress;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getRecordsAddresses(domain)];\n          case 1:\n            recordAddresses = _a.sent();\n            if (!recordAddresses) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                domain: domain\n              });\n            }\n            ownerAddress = recordAddresses[0];\n            if (!ownerAddress) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                domain: domain\n              });\n            }\n            return [2 /*return*/, ownerAddress];\n        }\n      });\n    });\n  };\n  Zns.prototype.resolver = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var recordsAddresses, resolverAddress;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getRecordsAddresses(domain)];\n          case 1:\n            recordsAddresses = _a.sent();\n            if (!recordsAddresses || !recordsAddresses[0]) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                domain: domain\n              });\n            }\n            resolverAddress = recordsAddresses[1];\n            if ((0, utils_1.isNullAddress)(resolverAddress)) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnspecifiedResolver, {\n                domain: domain\n              });\n            }\n            return [2 /*return*/, resolverAddress];\n        }\n      });\n    });\n  };\n  Zns.prototype.namehash = function (domain) {\n    if (!this.checkDomain(domain)) {\n      throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n        domain: domain\n      });\n    }\n    return (0, namehash_1.znsNamehash)(domain);\n  };\n  Zns.prototype.childhash = function (parentHash, label) {\n    return (0, namehash_1.znsChildhash)(parentHash, label);\n  };\n  Zns.prototype.isSupportedDomain = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, this.checkDomain(domain)];\n      });\n    });\n  };\n  Zns.prototype.record = function (domain, key) {\n    return __awaiter(this, void 0, void 0, function () {\n      var records, record;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.records(domain, [key])];\n          case 1:\n            records = _a.sent();\n            record = records[key];\n            if (!record) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.RecordNotFound, {\n                domain: domain,\n                recordName: key\n              });\n            }\n            return [2 /*return*/, record];\n        }\n      });\n    });\n  };\n  Zns.prototype.records = function (domain, keys) {\n    return __awaiter(this, void 0, void 0, function () {\n      var records;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.allRecords(domain)];\n          case 1:\n            records = _a.sent();\n            return [2 /*return*/, (0, utils_1.constructRecords)(keys, records)];\n        }\n      });\n    });\n  };\n  Zns.prototype.allRecords = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resolverAddress;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.resolver(domain)];\n          case 1:\n            resolverAddress = _a.sent();\n            return [2 /*return*/, this.getResolverRecords(resolverAddress)];\n        }\n      });\n    });\n  };\n  Zns.prototype.twitter = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          domain: domain,\n          methodName: 'twitter'\n        });\n      });\n    });\n  };\n  Zns.prototype.reverse = function (address, currencyTicker) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'reverse'\n        });\n      });\n    });\n  };\n  Zns.prototype.reverseOf = function (address, location) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'reverseOf'\n        });\n      });\n    });\n  };\n  Zns.prototype.isRegistered = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var recordAddresses;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getRecordsAddresses(domain)];\n          case 1:\n            recordAddresses = _a.sent();\n            return [2 /*return*/, Boolean(recordAddresses && recordAddresses[0])];\n        }\n      });\n    });\n  };\n  Zns.prototype.getTokenUri = function (tokenId) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'getTokenUri'\n        });\n      });\n    });\n  };\n  Zns.prototype.getDomainFromTokenId = function (tokenId) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'getDomainFromTokenId'\n        });\n      });\n    });\n  };\n  Zns.prototype.isAvailable = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.isRegistered(domain)];\n          case 1:\n            return [2 /*return*/, !_a.sent()];\n        }\n      });\n    });\n  };\n  Zns.prototype.registryAddress = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2 /*return*/, this.registryAddr];\n      });\n    });\n  };\n  Zns.prototype.locations = function (domains) {\n    return __awaiter(this, void 0, void 0, function () {\n      var recordsAddresses;\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, Promise.all(domains.map(function (domain) {\n              return _this.getRecordsAddresses(domain);\n            }))];\n          case 1:\n            recordsAddresses = _a.sent();\n            return [2 /*return*/, domains.reduce(function (locations, domain, i) {\n              var _a;\n              var location = null;\n              var domainRecordsAddresses = recordsAddresses[i];\n              if (domainRecordsAddresses) {\n                var ownerAddress = domainRecordsAddresses[0],\n                  resolverAddress = domainRecordsAddresses[1];\n                location = {\n                  registryAddress: _this.registryAddr,\n                  resolverAddress: resolverAddress,\n                  networkId: _this.network,\n                  blockchain: publicTypes_1.BlockchainType.ZIL,\n                  ownerAddress: ownerAddress,\n                  blockchainProviderUrl: _this.url\n                };\n              }\n              return __assign(__assign({}, locations), (_a = {}, _a[domain] = location, _a));\n            }, {})];\n        }\n      });\n    });\n  };\n  Zns.prototype.getRecordsAddresses = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var registryRecord, _a, ownerAddress, resolverAddress;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.isSupportedDomain(domain)) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n                domain: domain\n              });\n            }\n            return [4 /*yield*/, this.getContractMapValue(this.registryAddr, 'records', this.namehash(domain))];\n          case 1:\n            registryRecord = _b.sent();\n            if (!registryRecord) {\n              return [2 /*return*/, undefined];\n            }\n            _a = registryRecord.arguments, ownerAddress = _a[0], resolverAddress = _a[1];\n            return [2 /*return*/, [ownerAddress.startsWith('0x') ? (0, znsUtils_1.toBech32Address)(ownerAddress) : ownerAddress, resolverAddress]];\n        }\n      });\n    });\n  };\n  Zns.prototype.getResolverRecords = function (resolverAddress) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resolver;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if ((0, utils_1.isNullAddress)(resolverAddress)) {\n              return [2 /*return*/, {}];\n            }\n            resolver = (0, znsUtils_1.toChecksumAddress)(resolverAddress);\n            return [4 /*yield*/, this.getContractField(resolver, 'records')];\n          case 1:\n            return [2 /*return*/, _a.sent() || {}];\n        }\n      });\n    });\n  };\n  Zns.prototype.fetchSubState = function (contractAddress, field, keys) {\n    if (keys === void 0) {\n      keys = [];\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var params, method;\n      return __generator(this, function (_a) {\n        params = [contractAddress.replace('0x', ''), field, keys];\n        method = 'GetSmartContractSubState';\n        return [2 /*return*/, this.provider.request({\n          method: method,\n          params: params\n        })];\n      });\n    });\n  };\n  Zns.prototype.getContractField = function (contractAddress, field, keys) {\n    if (keys === void 0) {\n      keys = [];\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var contractAddr, result;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            contractAddr = contractAddress.startsWith('zil1') ? (0, znsUtils_1.fromBech32Address)(contractAddress) : contractAddress;\n            return [4 /*yield*/, this.fetchSubState(contractAddr, field, keys)];\n          case 1:\n            result = _a.sent() || {};\n            return [2 /*return*/, result[field]];\n        }\n      });\n    });\n  };\n  Zns.prototype.getContractMapValue = function (contractAddress, field, key) {\n    return __awaiter(this, void 0, void 0, function () {\n      var record;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.getContractField(contractAddress, field, [key])];\n          case 1:\n            record = _a.sent();\n            return [2 /*return*/, record && record[key] || null];\n        }\n      });\n    });\n  };\n  Zns.prototype.checkDomain = function (domain) {\n    var tokens = domain.split('.');\n    return !!tokens.length && tokens[tokens.length - 1] === 'zil' && tokens.every(function (v) {\n      return !!v.length;\n    });\n  };\n  Zns.prototype.checkNetworkConfig = function (source) {\n    if (!source.network) {\n      throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.UnsupportedNetwork, {\n        method: publicTypes_1.NamingServiceName.ZNS\n      });\n    }\n    if (!types_1.ZnsSupportedNetwork.guard(source.network)) {\n      this.checkCustomNetworkConfig(source);\n    }\n  };\n  Zns.prototype.checkRegistryAddress = function (address) {\n    // Represents both versions of Zilliqa addresses eth-like and bech32 zil-like\n    var addressValidator = new RegExp('^0x[a-fA-F0-9]{40}$|^zil1[qpzry9x8gf2tvdw0s3jn54khce6mua7l]{38}$');\n    if (!addressValidator.test(address)) {\n      throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.InvalidConfigurationField, {\n        method: this.name,\n        field: 'registryAddress'\n      });\n    }\n  };\n  Zns.prototype.checkCustomNetworkConfig = function (source) {\n    if (!source.registryAddress) {\n      throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n        method: publicTypes_1.NamingServiceName.ZNS,\n        config: 'registryAddress'\n      });\n    }\n    if (!source['url'] && !source['provider']) {\n      throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n        method: publicTypes_1.NamingServiceName.ZNS,\n        config: 'url or provider'\n      });\n    }\n  };\n  Zns.UrlMap = {\n    1: 'https://api.zilliqa.com',\n    333: 'https://dev-api.zilliqa.com',\n    111: 'http://localhost:4201'\n  };\n  Zns.NetworkNameMap = {\n    mainnet: 1,\n    testnet: 333,\n    localnet: 111\n  };\n  Zns.RegistryMap = {\n    1: 'zil1jcgu2wlx6xejqk9jw3aaankw6lsjzeunx2j0jz',\n    333: 'zil1hyj6m5w4atcn7s806s69r0uh5g4t84e8gp6nps'\n  };\n  return Zns;\n}(NamingService_1.NamingService);\nexports.default = Zns;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__createBinding","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","op","pop","push","__importDefault","exports","znsUtils_1","require","utils_1","types_1","resolutionError_1","publicTypes_1","FetchProvider_1","namehash_1","NamingService_1","configurationError_1","Zns","_super","source","url","UrlMap","network","_this","name","NamingServiceName","ZNS","checkNetworkConfig","NetworkNameMap","provider","default","registryAddr","RegistryMap","checkRegistryAddress","startsWith","toBech32Address","owner","domain","recordAddresses","ownerAddress","_a","getRecordsAddresses","ResolutionError","ResolutionErrorCode","UnregisteredDomain","resolver","recordsAddresses","resolverAddress","isNullAddress","UnspecifiedResolver","namehash","checkDomain","UnsupportedDomain","znsNamehash","childhash","parentHash","znsChildhash","isSupportedDomain","record","key","records","RecordNotFound","recordName","keys","allRecords","constructRecords","getResolverRecords","twitter","UnsupportedMethod","methodName","reverse","address","currencyTicker","reverseOf","location","isRegistered","Boolean","getTokenUri","tokenId","getDomainFromTokenId","isAvailable","registryAddress","locations","domains","all","map","reduce","domainRecordsAddresses","networkId","blockchain","BlockchainType","ZIL","blockchainProviderUrl","registryRecord","_b","getContractMapValue","toChecksumAddress","getContractField","fetchSubState","contractAddress","field","params","method","replace","request","contractAddr","fromBech32Address","tokens","split","every","ConfigurationErrorCode","UnsupportedNetwork","ZnsSupportedNetwork","guard","checkCustomNetworkConfig","addressValidator","RegExp","test","InvalidConfigurationField","CustomNetworkConfigMissing","config","mainnet","testnet","localnet","NamingService"],"sources":["/Users/shepher/Downloads/filename-space/node_modules/@unstoppabledomains/resolution/build/Zns.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar znsUtils_1 = require(\"./utils/znsUtils\");\nvar utils_1 = require(\"./utils\");\nvar types_1 = require(\"./types\");\nvar resolutionError_1 = require(\"./errors/resolutionError\");\nvar publicTypes_1 = require(\"./types/publicTypes\");\nvar FetchProvider_1 = __importDefault(require(\"./FetchProvider\"));\nvar namehash_1 = require(\"./utils/namehash\");\nvar NamingService_1 = require(\"./NamingService\");\nvar configurationError_1 = __importStar(require(\"./errors/configurationError\"));\n/**\n * @internal\n */\nvar Zns = /** @class */ (function (_super) {\n    __extends(Zns, _super);\n    function Zns(source) {\n        if (source === void 0) { source = {\n            url: Zns.UrlMap[1],\n            network: 'mainnet',\n        }; }\n        var _this = _super.call(this) || this;\n        _this.name = publicTypes_1.NamingServiceName.ZNS;\n        _this.checkNetworkConfig(source);\n        _this.network = Zns.NetworkNameMap[source.network];\n        _this.url = source['url'] || Zns.UrlMap[_this.network];\n        _this.provider =\n            source['provider'] || new FetchProvider_1.default(_this.name, _this.url);\n        _this.registryAddr =\n            source['registryAddress'] || Zns.RegistryMap[_this.network];\n        _this.checkRegistryAddress(_this.registryAddr);\n        if (_this.registryAddr.startsWith('0x')) {\n            _this.registryAddr = (0, znsUtils_1.toBech32Address)(_this.registryAddr);\n        }\n        return _this;\n    }\n    Zns.prototype.owner = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var recordAddresses, ownerAddress;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRecordsAddresses(domain)];\n                    case 1:\n                        recordAddresses = _a.sent();\n                        if (!recordAddresses) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                domain: domain,\n                            });\n                        }\n                        ownerAddress = recordAddresses[0];\n                        if (!ownerAddress) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                domain: domain,\n                            });\n                        }\n                        return [2 /*return*/, ownerAddress];\n                }\n            });\n        });\n    };\n    Zns.prototype.resolver = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var recordsAddresses, resolverAddress;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRecordsAddresses(domain)];\n                    case 1:\n                        recordsAddresses = _a.sent();\n                        if (!recordsAddresses || !recordsAddresses[0]) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                domain: domain,\n                            });\n                        }\n                        resolverAddress = recordsAddresses[1];\n                        if ((0, utils_1.isNullAddress)(resolverAddress)) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnspecifiedResolver, {\n                                domain: domain,\n                            });\n                        }\n                        return [2 /*return*/, resolverAddress];\n                }\n            });\n        });\n    };\n    Zns.prototype.namehash = function (domain) {\n        if (!this.checkDomain(domain)) {\n            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n                domain: domain,\n            });\n        }\n        return (0, namehash_1.znsNamehash)(domain);\n    };\n    Zns.prototype.childhash = function (parentHash, label) {\n        return (0, namehash_1.znsChildhash)(parentHash, label);\n    };\n    Zns.prototype.isSupportedDomain = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.checkDomain(domain)];\n            });\n        });\n    };\n    Zns.prototype.record = function (domain, key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var records, record;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.records(domain, [key])];\n                    case 1:\n                        records = _a.sent();\n                        record = records[key];\n                        if (!record) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.RecordNotFound, {\n                                domain: domain,\n                                recordName: key,\n                            });\n                        }\n                        return [2 /*return*/, record];\n                }\n            });\n        });\n    };\n    Zns.prototype.records = function (domain, keys) {\n        return __awaiter(this, void 0, void 0, function () {\n            var records;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.allRecords(domain)];\n                    case 1:\n                        records = _a.sent();\n                        return [2 /*return*/, (0, utils_1.constructRecords)(keys, records)];\n                }\n            });\n        });\n    };\n    Zns.prototype.allRecords = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resolverAddress;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.resolver(domain)];\n                    case 1:\n                        resolverAddress = _a.sent();\n                        return [2 /*return*/, this.getResolverRecords(resolverAddress)];\n                }\n            });\n        });\n    };\n    Zns.prototype.twitter = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    domain: domain,\n                    methodName: 'twitter',\n                });\n            });\n        });\n    };\n    Zns.prototype.reverse = function (address, currencyTicker) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'reverse',\n                });\n            });\n        });\n    };\n    Zns.prototype.reverseOf = function (address, location) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'reverseOf',\n                });\n            });\n        });\n    };\n    Zns.prototype.isRegistered = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var recordAddresses;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRecordsAddresses(domain)];\n                    case 1:\n                        recordAddresses = _a.sent();\n                        return [2 /*return*/, Boolean(recordAddresses && recordAddresses[0])];\n                }\n            });\n        });\n    };\n    Zns.prototype.getTokenUri = function (tokenId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'getTokenUri',\n                });\n            });\n        });\n    };\n    Zns.prototype.getDomainFromTokenId = function (tokenId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'getDomainFromTokenId',\n                });\n            });\n        });\n    };\n    Zns.prototype.isAvailable = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.isRegistered(domain)];\n                    case 1: return [2 /*return*/, !(_a.sent())];\n                }\n            });\n        });\n    };\n    Zns.prototype.registryAddress = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.registryAddr];\n            });\n        });\n    };\n    Zns.prototype.locations = function (domains) {\n        return __awaiter(this, void 0, void 0, function () {\n            var recordsAddresses;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all(domains.map(function (domain) { return _this.getRecordsAddresses(domain); }))];\n                    case 1:\n                        recordsAddresses = _a.sent();\n                        return [2 /*return*/, domains.reduce(function (locations, domain, i) {\n                                var _a;\n                                var location = null;\n                                var domainRecordsAddresses = recordsAddresses[i];\n                                if (domainRecordsAddresses) {\n                                    var ownerAddress = domainRecordsAddresses[0], resolverAddress = domainRecordsAddresses[1];\n                                    location = {\n                                        registryAddress: _this.registryAddr,\n                                        resolverAddress: resolverAddress,\n                                        networkId: _this.network,\n                                        blockchain: publicTypes_1.BlockchainType.ZIL,\n                                        ownerAddress: ownerAddress,\n                                        blockchainProviderUrl: _this.url,\n                                    };\n                                }\n                                return __assign(__assign({}, locations), (_a = {}, _a[domain] = location, _a));\n                            }, {})];\n                }\n            });\n        });\n    };\n    Zns.prototype.getRecordsAddresses = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var registryRecord, _a, ownerAddress, resolverAddress;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.isSupportedDomain(domain)) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n                                domain: domain,\n                            });\n                        }\n                        return [4 /*yield*/, this.getContractMapValue(this.registryAddr, 'records', this.namehash(domain))];\n                    case 1:\n                        registryRecord = _b.sent();\n                        if (!registryRecord) {\n                            return [2 /*return*/, undefined];\n                        }\n                        _a = registryRecord.arguments, ownerAddress = _a[0], resolverAddress = _a[1];\n                        return [2 /*return*/, [\n                                ownerAddress.startsWith('0x')\n                                    ? (0, znsUtils_1.toBech32Address)(ownerAddress)\n                                    : ownerAddress,\n                                resolverAddress,\n                            ]];\n                }\n            });\n        });\n    };\n    Zns.prototype.getResolverRecords = function (resolverAddress) {\n        return __awaiter(this, void 0, void 0, function () {\n            var resolver;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if ((0, utils_1.isNullAddress)(resolverAddress)) {\n                            return [2 /*return*/, {}];\n                        }\n                        resolver = (0, znsUtils_1.toChecksumAddress)(resolverAddress);\n                        return [4 /*yield*/, this.getContractField(resolver, 'records')];\n                    case 1: return [2 /*return*/, ((_a.sent()) ||\n                            {})];\n                }\n            });\n        });\n    };\n    Zns.prototype.fetchSubState = function (contractAddress, field, keys) {\n        if (keys === void 0) { keys = []; }\n        return __awaiter(this, void 0, void 0, function () {\n            var params, method;\n            return __generator(this, function (_a) {\n                params = [contractAddress.replace('0x', ''), field, keys];\n                method = 'GetSmartContractSubState';\n                return [2 /*return*/, this.provider.request({ method: method, params: params })];\n            });\n        });\n    };\n    Zns.prototype.getContractField = function (contractAddress, field, keys) {\n        if (keys === void 0) { keys = []; }\n        return __awaiter(this, void 0, void 0, function () {\n            var contractAddr, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        contractAddr = contractAddress.startsWith('zil1')\n                            ? (0, znsUtils_1.fromBech32Address)(contractAddress)\n                            : contractAddress;\n                        return [4 /*yield*/, this.fetchSubState(contractAddr, field, keys)];\n                    case 1:\n                        result = (_a.sent()) || {};\n                        return [2 /*return*/, result[field]];\n                }\n            });\n        });\n    };\n    Zns.prototype.getContractMapValue = function (contractAddress, field, key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var record;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getContractField(contractAddress, field, [key])];\n                    case 1:\n                        record = _a.sent();\n                        return [2 /*return*/, (record && record[key]) || null];\n                }\n            });\n        });\n    };\n    Zns.prototype.checkDomain = function (domain) {\n        var tokens = domain.split('.');\n        return (!!tokens.length &&\n            tokens[tokens.length - 1] === 'zil' &&\n            tokens.every(function (v) { return !!v.length; }));\n    };\n    Zns.prototype.checkNetworkConfig = function (source) {\n        if (!source.network) {\n            throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.UnsupportedNetwork, {\n                method: publicTypes_1.NamingServiceName.ZNS,\n            });\n        }\n        if (!types_1.ZnsSupportedNetwork.guard(source.network)) {\n            this.checkCustomNetworkConfig(source);\n        }\n    };\n    Zns.prototype.checkRegistryAddress = function (address) {\n        // Represents both versions of Zilliqa addresses eth-like and bech32 zil-like\n        var addressValidator = new RegExp('^0x[a-fA-F0-9]{40}$|^zil1[qpzry9x8gf2tvdw0s3jn54khce6mua7l]{38}$');\n        if (!addressValidator.test(address)) {\n            throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.InvalidConfigurationField, {\n                method: this.name,\n                field: 'registryAddress',\n            });\n        }\n    };\n    Zns.prototype.checkCustomNetworkConfig = function (source) {\n        if (!source.registryAddress) {\n            throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n                method: publicTypes_1.NamingServiceName.ZNS,\n                config: 'registryAddress',\n            });\n        }\n        if (!source['url'] && !source['provider']) {\n            throw new configurationError_1.default(configurationError_1.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n                method: publicTypes_1.NamingServiceName.ZNS,\n                config: 'url or provider',\n            });\n        }\n    };\n    Zns.UrlMap = {\n        1: 'https://api.zilliqa.com',\n        333: 'https://dev-api.zilliqa.com',\n        111: 'http://localhost:4201',\n    };\n    Zns.NetworkNameMap = {\n        mainnet: 1,\n        testnet: 333,\n        localnet: 111,\n    };\n    Zns.RegistryMap = {\n        1: 'zil1jcgu2wlx6xejqk9jw3aaankw6lsjzeunx2j0jz',\n        333: 'zil1hyj6m5w4atcn7s806s69r0uh5g4t84e8gp6nps',\n    };\n    return Zns;\n}(NamingService_1.NamingService));\nexports.default = Zns;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}