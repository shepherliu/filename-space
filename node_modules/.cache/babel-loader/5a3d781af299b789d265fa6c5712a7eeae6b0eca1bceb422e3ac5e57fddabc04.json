{"ast":null,"code":"var e,\n  n = require(\"web3modal\");\nfunction t() {\n  return t = Object.assign || function (e) {\n    for (var n = 1; n < arguments.length; n++) {\n      var t = arguments[n];\n      for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);\n    }\n    return e;\n  }, t.apply(this, arguments);\n}\nif (\"undefined\" != typeof window) {\n  var r = window;\n  r.UAUTH_VERSION = r.UAUTH_VERSION || {}, r.UAUTH_VERSION.WEB3MODAL = \"2.4.0\";\n}\nexports.connector = function (r, o) {\n  try {\n    var i,\n      c = function (r) {\n        if (null == i.wallet_type_hint) throw new Error(\"no wallet type present\");\n        var c;\n        if ([\"web3\", \"injected\"].includes(i.wallet_type_hint)) c = n.connectors.injected();else {\n          if (\"walletconnect\" !== i.wallet_type_hint) throw new Error(\"Connector not supported\");\n          var a = \"walletconnect\";\n          c = n.connectors.walletconnect(e.providerController.getProviderOption(a, \"package\"), t({\n            network: o.network\n          }, e.providerController.getProviderOption(a, \"options\")));\n        }\n        return c;\n      },\n      a = new r(o),\n      l = function (e, n) {\n        try {\n          var t = Promise.resolve(a.user()).then(function (e) {\n            i = e;\n          });\n        } catch (e) {\n          return n();\n        }\n        return t && t.then ? t.then(void 0, n) : t;\n      }(0, function () {\n        if (!a.fallbackLoginOptions.scope.includes(\"wallet\")) throw new Error('Must request the \"wallet\" scope for connector to work.');\n        return o.shouldLoginWithRedirect ? Promise.resolve(a.login({\n          packageName: \"@uauth/web3modal\",\n          packageVersion: \"2.4.0\"\n        })).then(function () {\n          return Promise.resolve(new Promise(function () {})).then(function () {\n            throw new Error(\"Should never get here.\");\n          });\n        }) : Promise.resolve(a.loginWithPopup({\n          packageName: \"@uauth/web3modal\",\n          packageVersion: \"2.4.0\"\n        })).then(function () {\n          return Promise.resolve(a.user()).then(function (e) {\n            i = e;\n          });\n        });\n      });\n    return Promise.resolve(l && l.then ? l.then(c) : c());\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, exports.display = {\n  name: \"Unstoppable\",\n  logo: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjczMTkgMi4wNjkzNFY5Ljg3MjI5TDAgMTkuMDk0TDIyLjczMTkgMi4wNjkzNFoiIGZpbGw9IiMyRkU5RkYiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE4LjQ2OTYgMS43MTM4N1YxNS4xOTE3QzE4LjQ2OTYgMTkuMTA5NCAxNS4yODkyIDIyLjI4NTMgMTEuMzY1OSAyMi4yODUzQzcuNDQyNjUgMjIuMjg1MyA0LjI2MjIxIDE5LjEwOTQgNC4yNjIyMSAxNS4xOTE3VjkuNTE2ODJMOC41MjQ0MyA3LjE3NTk0VjE1LjE5MTdDOC41MjQ0MyAxNi41NjI5IDkuNjM3NTkgMTcuNjc0NSAxMS4wMTA3IDE3LjY3NDVDMTIuMzgzOSAxNy42NzQ1IDEzLjQ5NyAxNi41NjI5IDEzLjQ5NyAxNS4xOTE3VjQuNDQ0OUwxOC40Njk2IDEuNzEzODdaIiBmaWxsPSIjNEM0N0Y3Ii8+PC9zdmc+\",\n  description: \"Enter your Unstoppable domain name\"\n}, exports.getUAuth = function (e, n) {\n  return new e(n);\n}, exports.registerWeb3Modal = function (n) {\n  e = n;\n};","map":{"version":3,"mappings":"IAqBIA;EAAAA;AAAAA;EAAAA;IAAAA;MAAAA;MAAAA;IAAAA;IAAAA;EAAAA;AAAAA;AAZJ,IAAsB,sBAAXC,QAAwB;EACjC,IAAMC,IAAKD;EACXC,EAAGC,gBAAgBD,EAAGC,iBAAiB,IACvCD,EAAGC,cAAcC,YCZI;AAAA;AAAAC,8BDwCrBC,GACAC;EACgB;IAAA,IAGZC;MAHYC;QAgChB,IAA6B,QAAzBD,EAAKE,kBACP,UAAUC,MAAM;QAGlB,IAAIC;QACJ,IAAI,CAAC,QAAQ,YAAYC,SAASL,EAAKE,mBACrCE,IAAWE,EAAUA,WAACC,gBACjB;UAAA,IAA8B,oBAA1BP,EAAKE,kBAWd,UAAUC,MAAM;UAVhB,IAAMK,IAAK;UAEXJ,IAAWE,aAAWG,cACnBjB,EAAYkB,mBAAmBC,kBAAkBH,GAAI,YAD7CI;YAGPC,SAASd,EAAKc;UAAAA,GACVrB,EAAYkB,mBAAmBC,kBAAkBH,GAAI;QAAA;QAO/D,OAAOJ;MAAAA;MApDDU,IAAQ,IAAIhB,EAAMC;MAGpBgB;QAAAA;UAAAA,wBACWD,EAAMd,QAAnBA;YAAAA;UAAAA;QAAAA;UAAAA;QAAAA;QAAAA;MAAAA,CADEgB;QAGF,KAAKF,EAAMG,qBAAqBC,MAAMb,SAAS,WAC7C,MAAM,IAAIF,MAAM;QAFJ,OAKVJ,EAAKoB,0BACDL,kBAAMM,MAAM;UAChBC,aAAa;UACbC,gBCxDe;QAAA;UAAA,uBD8DX,IAAIC,QAAc;YAExB,MAAM,IAAIpB,MAAM;UAAA;QAAA,KAhBJoB,gBAkBNT,EAAMU,eAAe;UACzBH,aAAa;UACbC,gBCpEe;QAAA,IDgDLG;UAAA,uBAsBCX,EAAMd,QAAnBA;YAAAA;UAAAA;QAAAA;MAAAA;IA0BL;EAAAC,CAzDqB,QAAfyB;IAAA;EAAAA;AAAAA,qBAbkC;EACvCC,MAAM;EACNC,MAAM;EACNC,aAAa;AAAA,sBAGS,UACtB/B,GACAC;EAEA,WAAWD,EAAMC;AAAAA,+BAd8C;EAC/DP,IAAMsC;AAAAA","names":["w3m","window","_w","UAUTH_VERSION","WEB3MODAL","exports","UAuth","opts","user","_temp3","wallet_type_hint","Error","provider","includes","connectors","injected","id","walletconnect","providerController","getProviderOption","_extends","network","uauth","_temp4","_catch","fallbackLoginOptions","scope","shouldLoginWithRedirect","login","packageName","packageVersion","Promise","loginWithPopup","then","e","name","logo","description","web3modal"],"sources":["../src/index.ts","../src/version.ts"],"sourcesContent":["import type UAuthSPA from '@uauth/js'\nimport type {UAuthConstructorOptions, UserInfo} from '@uauth/js'\nimport Web3Modal, {\n  connectors,\n  IAbstractConnectorOptions,\n  IProviderDisplay,\n} from 'web3modal'\nimport {VERSION} from './version'\n\nif (typeof window !== 'undefined') {\n  const _w = window as any\n  _w.UAUTH_VERSION = _w.UAUTH_VERSION || {}\n  _w.UAUTH_VERSION.WEB3MODAL = VERSION\n}\n\nexport interface IUAuthOptions\n  extends Partial<IAbstractConnectorOptions>,\n    UAuthConstructorOptions {\n  shouldLoginWithRedirect?: boolean\n}\n\nlet w3m: Web3Modal\nexport const registerWeb3Modal: (web3modal: Web3Modal) => void = web3modal => {\n  w3m = web3modal\n}\n\nexport const display: IProviderDisplay = {\n  name: 'Unstoppable',\n  logo: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjczMTkgMi4wNjkzNFY5Ljg3MjI5TDAgMTkuMDk0TDIyLjczMTkgMi4wNjkzNFoiIGZpbGw9IiMyRkU5RkYiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE4LjQ2OTYgMS43MTM4N1YxNS4xOTE3QzE4LjQ2OTYgMTkuMTA5NCAxNS4yODkyIDIyLjI4NTMgMTEuMzY1OSAyMi4yODUzQzcuNDQyNjUgMjIuMjg1MyA0LjI2MjIxIDE5LjEwOTQgNC4yNjIyMSAxNS4xOTE3VjkuNTE2ODJMOC41MjQ0MyA3LjE3NTk0VjE1LjE5MTdDOC41MjQ0MyAxNi41NjI5IDkuNjM3NTkgMTcuNjc0NSAxMS4wMTA3IDE3LjY3NDVDMTIuMzgzOSAxNy42NzQ1IDEzLjQ5NyAxNi41NjI5IDEzLjQ5NyAxNS4xOTE3VjQuNDQ0OUwxOC40Njk2IDEuNzEzODdaIiBmaWxsPSIjNEM0N0Y3Ii8+PC9zdmc+',\n  description: 'Enter your Unstoppable domain name',\n}\n\nexport const getUAuth = (\n  UAuth: typeof UAuthSPA,\n  opts: IUAuthOptions,\n): UAuthSPA => {\n  return new UAuth(opts)\n}\n\nexport const connector = async (\n  UAuth: typeof UAuthSPA,\n  opts: IUAuthOptions,\n): Promise<any> => {\n  const uauth = new UAuth(opts)\n\n  let user: UserInfo\n  try {\n    user = await uauth.user()\n  } catch (error) {\n    if (!uauth.fallbackLoginOptions.scope.includes('wallet')) {\n      throw new Error('Must request the \"wallet\" scope for connector to work.')\n    }\n\n    if (opts.shouldLoginWithRedirect) {\n      await uauth.login({\n        packageName: '@uauth/web3modal',\n        packageVersion: VERSION,\n      })\n\n      // NOTE: We don't want to throw because the page will take some time to\n      // load the redirect page.\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      await new Promise<void>(() => {})\n      // We need to throw here otherwise typescript won't know that user isn't null.\n      throw new Error('Should never get here.')\n    } else {\n      await uauth.loginWithPopup({\n        packageName: '@uauth/web3modal',\n        packageVersion: VERSION,\n      })\n      user = await uauth.user()\n    }\n  }\n\n  if (user.wallet_type_hint == null) {\n    throw new Error('no wallet type present')\n  }\n\n  let provider: any\n  if (['web3', 'injected'].includes(user.wallet_type_hint)) {\n    provider = connectors.injected()\n  } else if (user.wallet_type_hint === 'walletconnect') {\n    const id = 'walletconnect'\n\n    provider = connectors.walletconnect(\n      (w3m as any).providerController.getProviderOption(id, 'package'),\n      {\n        network: opts.network,\n        ...(w3m as any).providerController.getProviderOption(id, 'options'),\n      },\n    )\n  } else {\n    throw new Error('Connector not supported')\n  }\n\n  return provider\n}\n","export const VERSION = \"2.4.0\";\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}